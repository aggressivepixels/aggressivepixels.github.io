<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Rewriting the generator in PureScript — Aggressive Pixels</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/fcf6f3df75ed38bd5d0f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/fcf6f3df75ed38bd5d0f.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-a2a7578d975f2eba2832.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1daf1ec1ecf144ee9147.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.df614fa7e284979095d4.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-4b0a5f8a53b54f640b73.js" as="script"/><link rel="preload" href="/_next/static/chunks/dd60cde1b1261e54f6d9cd0fc809483a66d1986f.98b45c5d2a1143a92a48.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-7c16db907a277cabe5db.js" as="script"/></head><body class="antialiased bg-white text-gray-600"><div id="__next"><div class="max-w-screen-md mx-auto"><nav class="sm:flex sm:items-center sm:justify-between"><div class="sm:py-6 py-4 flex justify-between items-center"><a class="ml-4 mr-2 block uppercase font-semibold pt-1 select-none text-xl text-gray-900" href="/">Aggressive<span class="text-yellow-500">Pixels</span></a><div class="sm:hidden mr-3"><button class="block h-8 w-8 p-1 rounded text-current" type="button" aria-label="Menu"><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor"><path d="M4 6h16M4 12h16m-7 6h7"></path></svg></button></div></div><div class="sm:flex sm:flex-row sm:mb-0 sm:mx-0 mb-4 mx-3 hidden"><a class="sm:mr-3 sm:text-lg text-xl pt-1 px-1 mb-1 " href="/">Home</a><a class="sm:mr-3 sm:text-lg text-xl pt-1 px-1 mb-1 text-yellow-500" href="/blog">Blog</a><a class="sm:mr-3 sm:text-lg text-xl pt-1 px-1 mb-1 " href="/contact">Contact</a></div></nav><main class="px-4 mt-6 sm:mb-6"><article><div class="font-semibold text-gray-900 text-3xl sm:text-4xl"><h1><a href="/blog/rewriting-the-generator-in-purescript">Rewriting the generator in PureScript</a></h1></div><div class="prose pt-6 pb-12 max-w-none"><p>The <a href="https://golang.org">Go</a> generator I first built for this blog was… okay.
It did what it needed to do, it was fast and it was very small. But I wasn’t
happy with it — HTML templates are brittle, and so is CSS. Having a bit of
experience with <a href="https://elm-lang.org">Elm</a>, I really wanted something like
it’s <a href="https://package.elm-lang.org/packages/elm/html/latest/"><code>Html</code></a> package.
<em>However</em> I find Elm to be an overkill for a simple blog, and I don’t find the
options for static Elm pages very compelling, either. After thinking a bit and
pondering my options, I decided to go with PureScript.</p>
<h2 class="group" id="why">Why?<a class="inline-block ml-2" href="#why"><span class="hidden text-gray-500 hover:text-gray-900 group-hover:inline-block h-5 w-5 group"><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" class="inline-block mb-1"><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></span></a></h2>
<p>I’ve been reading about Haskell <em>a lot</em> recently, and I initially tried to
build the blog using <a href="https://jaspervdj.be/hakyll/">Hakyll</a>, but I ran out of
RAM several times when attempting to compile one of it’s dependencies
(<a href="https://pandoc.org/">Pandoc</a>). I also knew about PureScript,
<a href="https://pursuit.purescript.org/packages/purescript-smolder/7.0.0"><code>purescript-smolder</code></a>
and
<a href="https://pursuit.purescript.org/packages/purescript-css/4.0.0"><code>purescript-css</code></a>,
which essentially meant I could have an entirely type-safe generator,
where broken HTML and CSS would produce a compiler error rather than a
funny-looking page, which was exactly what I wanted.</p>
<h2 class="group" id="the-process">The process<a class="inline-block ml-2" href="#the-process"><span class="hidden text-gray-500 hover:text-gray-900 group-hover:inline-block h-5 w-5 group"><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" class="inline-block mb-1"><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></span></a></h2>
<p>Writing the Go generator took little more than two days because I was familiar
with the language and the paradigm. However, this was my first contact with
PureScript and it’s build tools, and my FP background is very limited, only
having done a couple of Elm toy projects. Sometimes I would get stuck for half
an hour or more with a single compiler error, and I have to admit I don’t yet
understand how all of this works. It was, however, a wonderful experience, and
I’m slowly starting to feel some things “click”.</p>
<p>Overall it took about 14 days to get this generator to be as capable as the
old one (even though the old one did not provide type-safety for HTML nor CSS).</p>
<p>It still needs a lot of work though — the error handling is non-existing,
I’m probably abusing do notation and there are likely better, terser ways of
doing most of what I’m doing in it.</p>
<h2 class="group" id="should-you-do-something-like-this">Should you do something like this?<a class="inline-block ml-2" href="#should-you-do-something-like-this"><span class="hidden text-gray-500 hover:text-gray-900 group-hover:inline-block h-5 w-5 group"><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor" class="inline-block mb-1"><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></span></a></h2>
<p>Probably not. There are <a href="https://www.staticgen.com/">a lot</a> of static site
generators out there that might be more than enough for your needs. However,
it’s a great project for learning how a static site generator works, and if you
suffer from <a href="https://en.wikipedia.org/wiki/Not_invented_here">NIH syndrome</a>
like me, this is definitely the way to go. You’d be in complete control of the
markup and the whole process that turns it into your page.</p>
<p>Hopefully one day it’ll become useful enough for other people to use it.</p></div><div class="sm:flex-row sm:pb-6 flex flex-col pb-12"><div class="flex-1"><div><p>Previous post</p><p class="mt-1 text-xl text-yellow-500"><a href="/blog/hello-world"><span class="sm:inline-block hidden w-4 h-4 pt-px"><svg fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor"><path d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg></span> <!-- -->Hello world!</a></p></div></div><div class="flex-1"></div></div></article></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Rewriting the generator in PureScript","slug":"rewriting-the-generator-in-purescript","content":"\u003cp\u003eThe \u003ca href=\"https://golang.org\"\u003eGo\u003c/a\u003e generator I first built for this blog was… okay.\nIt did what it needed to do, it was fast and it was very small. But I wasn’t\nhappy with it — HTML templates are brittle, and so is CSS. Having a bit of\nexperience with \u003ca href=\"https://elm-lang.org\"\u003eElm\u003c/a\u003e, I really wanted something like\nit’s \u003ca href=\"https://package.elm-lang.org/packages/elm/html/latest/\"\u003e\u003ccode\u003eHtml\u003c/code\u003e\u003c/a\u003e package.\n\u003cem\u003eHowever\u003c/em\u003e I find Elm to be an overkill for a simple blog, and I don’t find the\noptions for static Elm pages very compelling, either. After thinking a bit and\npondering my options, I decided to go with PureScript.\u003c/p\u003e\n\u003ch2 class=\"group\" id=\"why\"\u003eWhy?\u003ca class=\"inline-block ml-2\" href=\"#why\"\u003e\u003cspan class=\"hidden text-gray-500 hover:text-gray-900 group-hover:inline-block h-5 w-5 group\"\u003e\u003csvg fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" class=\"inline-block mb-1\"\u003e\u003cpath d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eI’ve been reading about Haskell \u003cem\u003ea lot\u003c/em\u003e recently, and I initially tried to\nbuild the blog using \u003ca href=\"https://jaspervdj.be/hakyll/\"\u003eHakyll\u003c/a\u003e, but I ran out of\nRAM several times when attempting to compile one of it’s dependencies\n(\u003ca href=\"https://pandoc.org/\"\u003ePandoc\u003c/a\u003e). I also knew about PureScript,\n\u003ca href=\"https://pursuit.purescript.org/packages/purescript-smolder/7.0.0\"\u003e\u003ccode\u003epurescript-smolder\u003c/code\u003e\u003c/a\u003e\nand\n\u003ca href=\"https://pursuit.purescript.org/packages/purescript-css/4.0.0\"\u003e\u003ccode\u003epurescript-css\u003c/code\u003e\u003c/a\u003e,\nwhich essentially meant I could have an entirely type-safe generator,\nwhere broken HTML and CSS would produce a compiler error rather than a\nfunny-looking page, which was exactly what I wanted.\u003c/p\u003e\n\u003ch2 class=\"group\" id=\"the-process\"\u003eThe process\u003ca class=\"inline-block ml-2\" href=\"#the-process\"\u003e\u003cspan class=\"hidden text-gray-500 hover:text-gray-900 group-hover:inline-block h-5 w-5 group\"\u003e\u003csvg fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" class=\"inline-block mb-1\"\u003e\u003cpath d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eWriting the Go generator took little more than two days because I was familiar\nwith the language and the paradigm. However, this was my first contact with\nPureScript and it’s build tools, and my FP background is very limited, only\nhaving done a couple of Elm toy projects. Sometimes I would get stuck for half\nan hour or more with a single compiler error, and I have to admit I don’t yet\nunderstand how all of this works. It was, however, a wonderful experience, and\nI’m slowly starting to feel some things “click”.\u003c/p\u003e\n\u003cp\u003eOverall it took about 14 days to get this generator to be as capable as the\nold one (even though the old one did not provide type-safety for HTML nor CSS).\u003c/p\u003e\n\u003cp\u003eIt still needs a lot of work though — the error handling is non-existing,\nI’m probably abusing do notation and there are likely better, terser ways of\ndoing most of what I’m doing in it.\u003c/p\u003e\n\u003ch2 class=\"group\" id=\"should-you-do-something-like-this\"\u003eShould you do something like this?\u003ca class=\"inline-block ml-2\" href=\"#should-you-do-something-like-this\"\u003e\u003cspan class=\"hidden text-gray-500 hover:text-gray-900 group-hover:inline-block h-5 w-5 group\"\u003e\u003csvg fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" class=\"inline-block mb-1\"\u003e\u003cpath d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\"\u003e\u003c/path\u003e\u003c/svg\u003e\u003c/span\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eProbably not. There are \u003ca href=\"https://www.staticgen.com/\"\u003ea lot\u003c/a\u003e of static site\ngenerators out there that might be more than enough for your needs. However,\nit’s a great project for learning how a static site generator works, and if you\nsuffer from \u003ca href=\"https://en.wikipedia.org/wiki/Not_invented_here\"\u003eNIH syndrome\u003c/a\u003e\nlike me, this is definitely the way to go. You’d be in complete control of the\nmarkup and the whole process that turns it into your page.\u003c/p\u003e\n\u003cp\u003eHopefully one day it’ll become useful enough for other people to use it.\u003c/p\u003e","date":"2020-01-23","displayDate":"January 23, 2020"},"prevPreview":{"title":"Hello world!","slug":"hello-world","excerpt":"\u003cp\u003eThe result rolling my face over the keyboard two days in a row\u003c/p\u003e","date":"2020-01-05","displayDate":"January 5, 2020"},"nextPreview":null},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"rewriting-the-generator-in-purescript"},"buildId":"rClGqm3aq66lBtJ6_kDMh","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-4beebf4ac9054f0bf4e6.js"></script><script src="/_next/static/chunks/main-a2a7578d975f2eba2832.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.1daf1ec1ecf144ee9147.js" async=""></script><script src="/_next/static/chunks/commons.df614fa7e284979095d4.js" async=""></script><script src="/_next/static/chunks/pages/_app-4b0a5f8a53b54f640b73.js" async=""></script><script src="/_next/static/chunks/dd60cde1b1261e54f6d9cd0fc809483a66d1986f.98b45c5d2a1143a92a48.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-7c16db907a277cabe5db.js" async=""></script><script src="/_next/static/rClGqm3aq66lBtJ6_kDMh/_buildManifest.js" async=""></script><script src="/_next/static/rClGqm3aq66lBtJ6_kDMh/_ssgManifest.js" async=""></script></body></html>